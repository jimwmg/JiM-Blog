---
title: npm包学习

### 1 npm基础
```javascript
npm init -yes
npm install package
```

### 2 package
[optimist](https://www.npmjs.com/package/optimist):(source-code-done)

index.js
```javascript
var argv = require('optimist')
    .boolean('v')
    .argv
;
console.dir(argv);
```

```javascript 
node index.js -v -r -p

```

```javascript
{ _: [ 'foo', 'baz' ],
  v: true,
  p: 3000,
  '$0': '/usr/local/bin/node ./index.js' }
```
[portfinder](https://www.npmjs.com/package/portfinder)

index.js
```javascript 
var portfinder = require('portfinder');
portfinder.basePort = 9080;
portfinder.getPort(function (err, port) {
  //
  // `port` is guaranteed to be a free port
  // in this scope.
  //
  console.log(port) //9080
```
[union](https://www.npmjs.com/package/union)

[ip](https://www.npmjs.com/package/ip)

[prompt](https://www.npmjs.com/package/prompt)

[ora](https://www.npmjs.com/package/ora)

[node-notifier](https://www.npmjs.com/package/node-notifier) : 错误提示

[commander](https://www.npmjs.com/package/commander):（source-code-done）

[glob](https://www.npmjs.com/package/glob)

[async](https://www.npmjs.com/package/async)

[fs-readdir-recursive](https://www.npmjs.com/package/fs-readdir-recursive)

[resolve](https://www.npmjs.com/package/resolve)

[import-local](https://www.npmjs.com/package/import-local):Useful for CLI tools that want to defer to the user's locally installed version when available, but still work if it's not installed locally. For example, [AVA](http://ava.li/) and [XO](https://github.com/xojs/xo) uses this method.

[debug](https://www.npmjs.com/package/debug):A tiny JavaScript debugging utility modelled after Node.js core's debugging technique. Works in Node.js and web browsers.

```javascript
var debug = require('debug')('http')
  , http = require('http')
  , name = 'My App';
 
// fake app
 
debug('booting %o', name);
```

DEBUG=* node index.js

http booting 'My App' +0ms

[chokidar](https://www.npmjs.com/package/chokidar):Chokidar does still rely on the Node.js core `fs` module, but when using `fs.watch` and `fs.watchFile` for watching, it normalizes the events it receives, often checking for truth by getting file stats and/or dir contents.

```javascript
const chokidar = require('chokidar');
const path = require('path');
const log = console.log.bind(console);
// One-liner for current directory

const watcher = chokidar.watch(path.resolve(__dirname,'cmd.js'));

watcher
  .on('add', path => log(`File ${path} has been added`))
  .on('change', path => log(`File ${path} has been changed`))
  .on('unlink', path => log(`File ${path} has been removed`));
```

[yargs](https://github.com/yargs/yargs/blob/HEAD/docs/api.md)

[internal-ip](https://www.npmjs.com/package/internal-ip)

[glob-watcher](https://www.npmjs.com/package/glob-watcher)

```javascript
const watch = require('glob-watcher');
const path = require('path');
// const watcher = watch([path.resolve(__dirname,'client')]);
console.log(path.resolve(__dirname))
const watcher = watch([path.resolve(__dirname) + '/client/**/**.**']);
watcher.on('change', function(...args) {
  console.log('args',args);
});
```





