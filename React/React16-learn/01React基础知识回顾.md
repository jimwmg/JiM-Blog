---
title：React基础知识回顾
---

### 1.基础知识

JSX语法：

```
{} 中表示表达式
大写开头的标签表示组件
小写开头的标签表示原生标签
```

组件声明方式：

```javascript
//函数直接声明
import React from 'react';
function Welcome(props) {
  console.log('Welcome',this)
  return <h1>Hello, {props.name}</h1>;
}
export default Welcome
//class组件声明
class Clock extends React.Component{
  constructor(props) {
      super();
      this.state = {date : new Date()};
      console.log('props',props,this)

  }

  tick(){
      this.setState(
          {date:new Date()}
      );
  }

  componentDidMount(){
  //箭头函数中的this是在定义函数的时候绑定，而不是在执行函数的时候绑定。
  //ES6中定义的时候绑定this的具体含义，应该继承的是父执行上下文里面的this，切忌是父执行上下文！！！
  //箭头函数会继承外层函数调用的this绑定，而无论this绑定到什么
  console.log('componentDidMount',this)
      this.timerID = setInterval(()=>this.tick(),1000)
  }

  componentWillUnmount(){
      clearInterval(this.timerID)
  }
  render(){
      return (
          <div>
              <p>hello world</p>
              <p>it is {this.state.date.toLocaleTimeString()}</p>
          </div>
      );
  }
}
export default Clock
```

组件类型方式

* 无状态组件

```
1.组件不会被实例化，整体渲染性能得到提升
因为组件被精简成一个render方法的函数来实现的，由于是无状态组件，所以无状态组件就不会在有组件实例化的过程，无实例化过程也就不需要分配多余的内存，从而性能得到一定的提升。
2.组件不能访问this对象
无状态组件由于没有实例化过程，所以无法访问组件this中的对象，例如：this.ref、this.state等均不能访问。若想访问就不能使用这种形式来创建组件
3.组件无法访问生命周期的方法
因为无状态组件是不需要组件生命周期管理和状态管理，所以底层实现这种形式的组件时是不会实现组件的生命周期方法。所以无状态组件是不能参与组件的各个生命周期管理的。
4.无状态组件只能访问输入的props，同样的props会得到同样的渲染结果，不会有副作用
```

* 有状态组件

```
有状态组件又被称为容器组件,它主要用来处理数据或者页面逻辑交互。它比无状态功能更加强大。类组件可以维护自身的状态变量，即组件的state。

有状态组件组件还有不同的生命周期方法，可以让开发者能够在组件的不同阶段（挂载、更新、卸载），对组件做更多的控制。

在React组件中有状态组件相当于一个枢纽站。因为它就像一个容器，里面包含的是无状态组件，在容器组件中获取完数据后，再将这些数据分配给子组件。
```

通常，函数（`function`）与类（`class`）最大的区别是：是否能够维护自己的数据（即状态）。函数基本上仅关注动作（`action`），而不关心数据的维护，不用维持一个状态，不用把自己的数据保存在内存中。函数使用的数据是从外部获取（或者不获取数据），函数运行时，会完成一系列的动作，最后将结果返回（也可能不返回，仅仅是完成指定的动作）。相对而言，类有能力维护状态（保存数据），也可以定义自己的一系列动作。

一般来说，函数的速度较快，适合用于做表现层，而类能够处理复杂逻辑和状态，适合做逻辑层和数据层。所以，对于 `React` 来说，一般选择函数来无状态组件，得到所谓的无状态函数（`stateless function`），好处是渲染的速度快，所以多使用无状态组件，尽量不要让数据散落在各个组件中。数据集中管理可以更好的保持数据的一致性和可维护性。

有状态组件就是使用类来生成。类可以有自己的状态，维护自己的数据，也是完全符合有状态组件的要求。但是类相对来说速度比函数慢，影响渲染的性能，同时数据过于分散会给后期的维护带来比较大的困难（这也是为什么状态过多时要使用 `Redux` 的原因），因此要尽量控制有状态组件的数量。当然，类也可以生成无状态组件，但是既然不需要维护状态的工作，用函数能完成得更好，其实也就没有必要使用类来做无状态组件。



