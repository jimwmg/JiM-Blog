---

---

[babel7按需加载](https://erasermeng.github.io/2017/11/02/%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BDpolyfill%E2%80%94%E2%80%94babel7%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%89%93%E5%BC%80%E6%96%B9%E5%BC%8F/)

[babel7教程](https://blog.zfanw.com/babel-js/)

[babel-handbook](https://github.com/jamiebuilds/babel-handbook/blob/master/translations/en/user-handbook.md#making-your-own-preset)

[babel-config.js](https://new.babeljs.io/docs/en/next/babelconfigjs.html)

[.babelrc-路径配置](https://babeljs.io/docs/en/config-files#file-relative-configuration)

[babel7-.babelrc](https://new.babeljs.io/docs/en/next/babelconfigjs.html#specifying-the-root-folder)

[how-can-you-specify-path-in-babel-loader](https://stackoverflow.com/questions/43777992/how-can-you-specify-a-custom-path-for-the-babel-loader-in-webpack-1)

[babel-loader-webpack文档](https://webpack.docschina.org/loaders/babel-loader/)

[@babel/parser-options配置](https://babeljs.io/docs/en/babel-parser)

周一来了尝试下这个解决方案；



```javascript
// Export from "./my-custom-loader.js" or whatever you want.
module.exports = require("babel-loader").custom(babel => {
  function myPlugin() {
    return {
      visitor: {},
    };
  }

  return {
    // Passed the loader options.
    customOptions({ opt1, opt2, ...loader }) {
      return {
        // Pull out any custom options that the loader might have.
        custom: { opt1, opt2 },

        // Pass the options back with the two custom options removed.
        loader,
      };
    },

    // Passed Babel's 'PartialConfig' object.
    config(cfg) {
      if (cfg.hasFilesystemConfig()) {
        // Use the normal config
        return cfg.options;
      }

      return {
        ...cfg.options,
        plugins: [
          ...(cfg.options.plugins || []),

          // Include a custom plugin in the options.
          myPlugin,
        ],
      };
    },

    result(result) {
      return {
        ...result,
        code: result.code + "\n// Generated by some custom loader",
      };
    },
  };
});
```

