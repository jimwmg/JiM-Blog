---
title:正则基础
typora-root-url: ../../img
---

### 1 正则匹配原理之回溯

* 没有回溯的匹配 `/ab{1,3}c/`

![huisu1](/huisu1.png)

* 有回溯的匹配 `/ab{1,3}c/`

![huisu2](/huisu2.png)

* 回溯的优化  `字符串： "abc"de` 正则 `/".*"/`  ==> `/"[^"]*"/` ( 这个正则可以优化正则的撇撇过程，减少不必要的回溯)

![huisu3](/huisu3.png)

回溯出现的原因：根据以上案例可以发现回溯出现的原因是 **贪婪量词** 导致的，为什么这么说呢，因为贪婪量词会尽可能多的匹配，如果无法满足正则的匹配，然后会慢慢减少匹配的数量；

惰性量词：就是在贪婪量词的后面加一个 问号，表示尽可能少的匹配；惰性量词也会有回溯的现象发生；

### 2 正则表达式的结构和操作符

#### 2.1 正则表达式的结构

| 结构   | 说明                                                         |
| ------ | ------------------------------------------------------------ |
| 字面量 | 匹配一个具体的字符，包括不用转义和需要转移的。比如 a 匹配字符 'a', 比如 `\.` 匹配小数点 `.` |
| 字符组 | 匹配一个字符，多种可能中的某一个字符；比如 `[0-9]` 表示匹配一个数字；也可以使用简写 `\d` |
| 量词   | 表示一个字符或者分组连续出现的次数；`+(一次或多次) *(0次或多次) {m,n} ?(0次或一次) {m,} ` |
| 锚点   | 匹配一个位置，而不是字符，比如  `^ $ (?=p) (?!p) \b \B`      |
| 分组   | 用括号表示一个分组，`(ab)+` ; 还有一种非捕获型分组`(?:ab)+`;两者的区别是非捕获型分组不会再被正则对象所捕获； |
| 分支   | 多个子表达式多选一；                                         |



#### 2.2 正则表达式的操作符

| 操作符                                    | 说明         | 优先级 |
| ----------------------------------------- | ------------ | ------ |
| `\`                                       | 转义符       | 1      |
| `(...)(?:...)(?=...)(?!...)[...]`         | 括号和方括号 | 2      |
| `* + {m,n} {m,} ? `                       | 量词         | 3      |
| `^ $ (?=p) (?!p) \b \B \元字符  一般字符` | 位置和序列   | 4      |
| ` |`                                      | 管道符       | 5      |
|                                           |              |        |
|                                           |              |        |



#### 2.3 元字符的转义问题

元字符定义：所谓元字符，就是正则中含有特殊含义的字符；所有的结构里用到的元字符总结如下：

`^ , $ , . , * , + , ?, |, \, /, (, ) ,[, ], {, }, =, : , - `

对于字面量上来说，以上出现的字符大部分需要进行经过 `\` 转义，有的也不需要；

```javascript
/\(/.test('('); //true
/\*/.test('*');//true
/{/.test('{}');//true
....
```

对于字符组来说，字符组中的元字符就不是必须经过转义，只有用于字符组中的特殊元字符才需要经过转义，比如 `^ [ ] -`;

```javascript
/[\^\[\]$({.*+=?\\|/)}:]/.test('\\'); //测试字符串可以是 ^ , $ , . , * , + , ?, |, \, /, (, ) ,[, ], {, }, =, : , -` 中的某一个
```

**注意转义字符 `\`的作用，在该字符后面的字符会被转义为普通字符**

```javascript
/[\]]/.test('\\');
//注意区分这两者的区别；
/[\]/.test('\\'); //错误写法， `]`字符会被转义

```

