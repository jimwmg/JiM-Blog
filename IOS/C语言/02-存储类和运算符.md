---
存储类
---

### 1 存储类

存储类主要定义C程序中变量或者函数的范围（两者的可见性）和生命周期，这些说明符放在它们所修饰的类型之前；C语言中包括以下存储类；

- auto
- register
- static
- extern

#### 全局变量和局部变量

全局变量：在所有函数外部定义的变量称为全局变量（Global Variable），它的作用域默认是整个程序，也就是所有的源文件，包括 .c 和 .h 文件

局部变量：定义在函数内部的变量称为局部变量（Local Variable），它的作用域仅限于函数内部， 离开该函数后就是无效的，再使用就会报错；

任何一种编程中，作用域是程序中定义的变量所存在的区域，超过该区域变量就不能被访问。C 语言中有三个地方可以声明变量：

1. 在函数或块内部的**局部**变量
2. 在所有函数外部的**全局**变量
3. 在**形式**参数的函数参数定义中

寄存器：寄存器是有触发器或锁存器组成，通常由触发器组成，寄存器拥有非常高的读写速度，所以在寄存器之间传递数据非常快 
内存：内存就是存储器，由半导体器件构成。 
计算机的存储层次（memory hierarchy）之中，寄存器（register）最快，内存其次，最慢的是硬盘。

内存又分为两种：

```
内存有两个部分 
随机存储器(RAM) 
也就是临时存放数据用的, 
断电后数据丢失 
所以你复制了东西,没有粘贴时,从新启动计算机后就无法粘贴刚才复制的数据了 
比如你玩游戏时,刚玩完游戏感觉计算机速度下降了,这就是内存被游戏数据占用了 
从新启动计算机后速度恢复正常,也就是内存中的RAM释放了数据 

另一个部分就是只读存储器(ROM) 
他是死的,删不掉,也无法覆盖其他数据 
主要用来存储内存厂商/型号等 
```

1. auto 存储类是所有 **局部变量的默认存储类**；

2. register 存储类用于定义存储在寄存器中而不是RAM中的 **局部变量**；这意味着变量的最大尺寸等于寄存器的大小（通常是一个词），且不能对它应用一元的 '&' 运算符（因为它没有内存位置）。寄存器只用于需要快速访问的变量，比如计数器。还应注意的是，定义 'register' 并不意味着变量将被存储在寄存器中，它意味着变量可能存储在寄存器中，这取决于硬件和实现的限制。

3. 3.1 static 存储类指示编译器在程序的生命周期内保持局部变量的存在，**而不需要在每次它进入和离开作用域时进行创建和销毁**。因此，使用 static 修饰局部变量可以在函数调用之间保持局部变量的值。

   3.2 static 修饰符也可以应用于全局变量。当 static 修饰全局变量时，会使变量的作用域限制在声明它的文件内。

   全局声明的一个 static 变量或方法可以被任何函数或方法调用，只要这些方法出现在跟 static 变量或方法同一个文件中。

4. **extern** 存储类用于提供一个全局变量的引用，全局变量对所有的程序文件都是可见的。当您使用 'extern' 时，对于无法初始化的变量，会把变量名指向一个之前定义过的存储位置。

   当您有多个文件且定义了一个可以在其他文件中使用的全局变量或函数时，可以在其他文件中使用 *extern* 来得到已定义的变量或函数的引用。可以这么理解，*extern* 是用来在另一个文件中声明一个全局变量或函数。

### 2 运算符

| sizeof() | 返回变量的大小。 | sizeof(a) 将返回 4，其中 a 是整数。  |
| -------- | ---------------- | ------------------------------------ |
| &        | 返回变量的地址。 | &a; 将给出变量的实际地址。           |
| *        | 指向一个变量。   | *a; 将指向一个变量。                 |
| ? :      | 条件表达式       | 如果条件为真 ? 则值为 X : 否则值为 Y |

优先级如下

| 后缀       | () [] -> . ++ - -                 | 从左到右 |
| ---------- | --------------------------------- | -------- |
| 一元       | + - ! ~ ++ - - (type)* & sizeof   | 从右到左 |
| 乘除       | * / %                             | 从左到右 |
| 加减       | + -                               | 从左到右 |
| 移位       | << >>                             | 从左到右 |
| 关系       | < <= > >=                         | 从左到右 |
| 相等       | == !=                             | 从左到右 |
| 位与 AND   | &                                 | 从左到右 |
| 位异或 XOR | ^                                 | 从左到右 |
| 位或 OR    | \|                                | 从左到右 |
| 逻辑与 AND | &&                                | 从左到右 |
| 逻辑或 OR  | \|\|                              | 从左到右 |
| 条件       | ?:                                | 从右到左 |
| 赋值       | = += -= *= /= %=>>= <<= &= ^= \|= | 从右到左 |
| 逗号       | ,                                 | 从左到右 |

### 3 函数

函数是一组一起执行一个任务的语句。每个 C 程序都至少有一个函数，即主函数 **main()** ，所有简单的程序都可以定义其他额外的函数。

* 函数声明：告诉编译器函数的名称、返回类型和参数。
* 函数定义：提供了函数的实际主体。

**函数声明和函数定义可以分开**；